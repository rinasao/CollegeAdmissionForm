<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reset Password</title>
    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css" />
    <script type="text/javascript">
        function validate() {
            event.preventDefault();

            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;
            let newPassword = document.getElementById("newPassword").value;
            let confirmPassword = document.getElementById("confirmPassword").value;
            if (email == null || email == undefined || email == "") {
                alert("Please enter Email.");
                document.resetpassword.email.focus();
                return false;
            } else if (password == null || password == undefined || password == "") {
                alert("Please enter Password.");
                document.resetpassword.password.focus();
                return false;
            } else if (newPassword == null || newPassword == undefined || newPassword == "") {
                alert("Please enter new Password.");
                document.resetpassword.newPassword.focus();
                return false;
            } else if (newPassword.length < 6) {
                alert("New Password length should be minimum 6 digit.");
                document.resetpassword.newPassword.focus();
                return false;
            }
            else if (confirmPassword == null || confirmPassword == undefined || confirmPassword == "") {
                alert("Please enter Confirm Password.");
                document.resetpassword.confirmPassword.focus();
                return false;
            } else if (confirmPassword != newPassword) {
                alert("New password and confirm password is not matching.");
                document.resetpassword.confirmPassword.focus();
                return false;
            }
            console.log("email", email)
            let resetPasswordData = {
                email: email,
                password: password,
                newPassword: newPassword,
                confirmPassword: confirmPassword,
            };

            fetch('http://localhost:9000/user/resetPassword', {
                method: 'post',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(resetPasswordData)
            }).then(function (response) {
                return response.json()
            }).then(function (data) {
                console.log(">>>>>>>>>>", data)
                if (data.message == "Password changed successfully") {
                    alert(data.message);
                    window.location = "http://localhost:9000/signin.html"
                } else {
                    alert(data.message);
                    return false;
                }
            })
        }
    </script>
</head>

<body class="bg">
    <br />
    <br />
    <div class="container">
        <div class="row">
            <div class="col-sm-6 col-md-4 col-md-offset-4">
                <h1 class="text-center login-title">
                    <i class="fa fa-key" aria-hidden="true"></i> Reset Password
                </h1>
                <div class="account-wall">
                    <div style="text-align: center; padding: 16px 0px;">
                        <img src="images/logo-login.png" width="220" />
                    </div>

                    <!-- <img
 class="profile-img"
 src="https://lh5.googleusercontent.com/-b0-k99FZlyE/AAAAAAAAAAI/AAAAAAAAAAA/eu7opA4byxI/photo.jpg?sz=120"
 alt=""
 /> -->
                    <form data-toggle="validator" class="form-signin" name="resetpassword"
                        onSubmit="return validate(this.form)">
                        <label>Email</label>
                        <div class="form-group pass_show">
                            <input type="email" id="email" class="form-control" placeholder="Email">
                        </div>
                        <label>Current Password</label>
                        <div class="form-group pass_show">
                            <input type="password" id="password" class="form-control" placeholder="Current Password">
                        </div>
                        <label>New Password</label>
                        <div class="form-group pass_show">
                            <input type="password" id="newPassword" class="form-control" placeholder="New Password">
                        </div>
                        <label>Confirm Password</label>
                        <div class="form-group pass_show">
                            <input type="password" id="confirmPassword" class="form-control"
                                placeholder="Confirm Password">
                        </div>
                        <span id="error"></span>
                        <br />
                        <button class="btn btn-lg btn-primary btn-block" type="submit">
                            Submit
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

</html>